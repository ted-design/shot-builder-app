@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* Timeline spine â€” vertical rhythm scaffold for schedule entries */
  .schedule-entry-stream {
    position: relative;
    padding-left: 28px;
  }

  /* The continuous vertical spine */
  .schedule-entry-stream::before {
    content: "";
    position: absolute;
    left: 9px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--color-border);
    border-radius: 1px;
  }

  /* Node marker on each entry */
  .schedule-entry-node {
    position: relative;
  }

  .schedule-entry-node::before {
    content: "";
    position: absolute;
    left: -24px;
    top: 14px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-surface);
    border: 2px solid var(--color-border-strong);
    z-index: 1;
  }

  /* Active node variant (has time set) */
  .schedule-entry-node--active::before {
    background: var(--color-primary);
    border-color: var(--color-primary);
  }

  /* Rhythm node variant (break/move) */
  .schedule-entry-node--rhythm::before {
    width: 6px;
    height: 6px;
    top: 11px;
    left: -23px;
    border-radius: 2px;
    background: var(--color-text-subtle);
    border-color: var(--color-text-subtle);
  }
}

@layer base {
  *,
  *::before,
  *::after {
    border-color: var(--color-border);
  }

  body {
    font-family: var(--font-sans);
    color: var(--color-text);
    background-color: var(--color-bg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

@media print {
  @page {
    margin: 12mm;
  }

  /* Hide the main app root when printing via the call sheet portal */
  body[data-callsheet-printing="1"] #root {
    display: none !important;
  }

  /* Hide the main app root when printing via the talent casting portal */
  body[data-talent-casting-printing="1"] #root {
    display: none !important;
  }

  /* Preserve colors and borders when printing (still requires "Background graphics" in the print dialog). */
  body[data-callsheet-printing="1"],
  body[data-callsheet-printing="1"] [data-callsheet-print-portal],
  body[data-callsheet-printing="1"] [data-callsheet-print-portal] * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  body[data-talent-casting-printing="1"],
  body[data-talent-casting-printing="1"] [data-talent-casting-print-portal],
  body[data-talent-casting-printing="1"] [data-talent-casting-print-portal] * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  body[data-callsheet-printing="1"] [data-callsheet-print-portal] {
    position: static !important;
    inset: auto !important;
    background: white !important;
    overflow: visible !important;
  }

  body[data-talent-casting-printing="1"] [data-talent-casting-print-portal] {
    position: static !important;
    inset: auto !important;
    background: white !important;
    overflow: visible !important;
  }

  body[data-callsheet-printing="1"] [data-callsheet-print-portal] [data-callsheet-print-root] {
    width: 100% !important;
    max-width: none !important;
    height: auto !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: visible !important;
  }

  body[data-talent-casting-printing="1"] [data-talent-casting-print-portal] [data-talent-casting-print-root] {
    width: 100% !important;
    max-width: none !important;
    height: auto !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: visible !important;
  }

  /* Remove paper border/shadow in print */
  body[data-callsheet-printing="1"] [data-callsheet-print-portal] .doc-page {
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
  }

  /* Prefer sensible page breaks */
  body[data-callsheet-printing="1"] [data-callsheet-print-portal] .doc-section-header--band {
    break-after: avoid !important;
    page-break-after: avoid !important;
  }

  body[data-callsheet-printing="1"] [data-callsheet-print-portal] .callsheet-block {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  /* Disable pointer events to avoid PDF annotation hit areas */
  body[data-callsheet-printing="1"] [data-callsheet-print-portal] * {
    pointer-events: none !important;
    cursor: default !important;
  }

  body[data-talent-casting-printing="1"] [data-talent-casting-print-portal] * {
    pointer-events: none !important;
    cursor: default !important;
  }

  body[data-callsheet-printing="1"] [data-callsheet-print-portal] a {
    text-decoration: none !important;
    color: inherit !important;
  }

  body[data-talent-casting-printing="1"] [data-talent-casting-print-portal] a {
    text-decoration: none !important;
    color: inherit !important;
  }
}
